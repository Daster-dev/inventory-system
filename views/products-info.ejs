
  <style>

    .card {
      display: grid;
      grid-template-columns: 1fr 1fr;
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      max-width: 800px;
      margin: auto;
      overflow: hidden;
    }

    .card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .info {
      padding: 30px;
      text-align: right;
    }

    .info h2 {
      margin-top: 0;
      color: #333;
    }

    .info p {
      margin: 10px 0;
      font-size: 16px;
      color: #555;
    }
  </style>

  <div class="card">
    <div>
      <img src="<%= product.imgPath || '/default.jpg' %>" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬">
    </div>
    <div class="info">
      <h2><%= product.name %></h2>
      <p>ğŸ“¦ Ø§Ù„Ù‚Ø³Ù…: <%= product.category %></p>
      <p>ğŸ’° Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡: <%= product.priceIn %> Ø¯.Ø¹</p>
      <p>ğŸ’¸ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹: <%= product.priceOut %> Ø¯.Ø¹</p>
      <p>ğŸ“Š Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªÙˆÙØ±Ø©: <%= product.qty %></p>
      <p>ğŸ•’ Ø¢Ø®Ø± Ø¨ÙŠØ¹: <%= product.lastSold ? product.lastSold.toLocaleDateString() : '--' %></p>
      <p>ğŸ†” Ø±Ù‚Ù… Ø§Ù„Ù…Ù†ØªØ¬: <%= product.id %></p>
      <p>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡: <%= product.expiryDate || '--' %></p>
      <div style="text-align: center; margin-top: 30px;">
  <button onclick="openEditForm()" style="margin: 10px;">âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</button>
  <a href="/products/delete/<%= product.id %>" style="color: red; margin: 10px;">ğŸ—‘ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬</a>
</div>

    </div>
  </div>
  
  
  
  
  
  
<div id="editForm" style="
  display: none;
  position: fixed;
  top: 10%;
  left: 50%;
  transform: translateX(-50%);
  background: white;
  border: 1px solid #ccc;
  padding: 20px;
  z-index: 999;
  width: 90%;
  max-width: 500px;
  box-shadow: 0 0 10px rgba(0,0,0,0.2);
">
  <button onclick="closeEditForm()" style="float: left;">âŒ</button>
  <h3 style="text-align: right;">ğŸ›  ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</h3>

  <form id="editProductForm">
    <input type="hidden" name="id" value="<%= product.id %>">

    <label>ğŸ“› Ø§Ù„Ø§Ø³Ù…:</label>
    <input type="text" name="name" value="<%= product.name %>" required>

    <label>ğŸ“¦ Ø§Ù„Ù‚Ø³Ù…:</label>
    <input type="text" name="category" value="<%= product.category %>" required>

    <label>ğŸ’° Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡:</label>
    <input type="number" name="priceIn" value="<%= product.priceIn %>" required>

    <label>ğŸ’¸ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹:</label>
    <input type="number" name="priceOut" value="<%= product.priceOut %>" required>

    <label>ğŸ“Š Ø§Ù„ÙƒÙ…ÙŠØ©:</label>
    <input type="number" name="qty" value="<%= product.qty %>" required>

    <label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡:</label>
    <input type="date" name="expiryDate" value="<%= product.expiryDate %>">

    <button type="submit" style="margin-top: 10px;">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
  </form>
</div>

  
  <script>
function openEditForm() {
  document.getElementById('editForm').style.display = 'block';
}

function closeEditForm() {
  document.getElementById('editForm').style.display = 'none';
}

document.getElementById('editProductForm').addEventListener('submit', async function(e) {
  e.preventDefault();

  const formData = new FormData(this);
  const data = Object.fromEntries(formData.entries());

  try {
    const res = await fetch(`/products/update/${data.id}`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });

    const result = await res.json();
    if (result.success) {
      alert('âœ… ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');
      location.reload();
    } else {
      alert('âŒ ÙØ´Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„');
    }
  } catch (err) {
    console.error(err);
    alert('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±');
  }
});
</script>
